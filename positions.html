<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>NB1 Tipp - Pozíciós sorrend</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      gap: 40px;
      padding: 30px;
      background: #f2f2f2;
    }
    .teams, .table {
      background: white;
      padding: 20px;
      border-radius: 8px;
    }
    .teams {
      width: 250px;
      max-height: 90vh;
      overflow-y: auto;
      position: sticky;
      top: 20px;
    }
    .team {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 8px;
      background-color: #fafafa;
      cursor: grab;
    }
    .team img {
      width: 30px;
      height: 30px;
    }
    .table {
      flex: 1;
    }
    .position {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid #ddd;
      background: #fff;
      min-height: 50px;
    }
    .position-number {
      font-weight: bold;
      width: 30px;
    }
    .dropzone {
      flex: 1;
      min-height: 40px;
      border: 1px dashed #ccc;
      margin-left: 10px;
      display: flex;
      align-items: center;
      justify-content: start;
      padding: 5px;
      background-color: #f9f9f9;
    }
    .dropzone.over {
      border-color: #007bff;
      background-color: #e0f0ff;
    }
  </style>
</head>
<body>
  <div class="teams" id="team-list"></div>
  <div class="table">
    <h3>Helyezések</h3>
    <div id="positions"></div>
  </div>
  <script>
    const teams = [
      { name: "Debreceni VSC", logo: "crest/crest-dvsc.png" },
      { name: "Diósgyőri VTK", logo: "crest/crest-dvtk.png" },
      { name: "Ferencváros", logo: "crest/crest-fradi.png" },
      { name: "ETO FC Győr", logo: "crest/crest-gyor.png" },
      { name: "Kazincbarcikai SC", logo: "crest/crest-kazincbarcika.png" },
      { name: "Kisvárda FC", logo: "crest/crest-kisvarda.png" },
      { name: "MTK Budapest", logo: "crest/crest-mtk.png" },
      { name: "Nyíregyháza Spartacus", logo: "crest/crest-nyiregyhaza.png" },
      { name: "Paksi FC", logo: "crest/crest-paks.png" },
      { name: "Puskás Akadémia", logo: "crest/crest-puskas.png" },
      { name: "Újpest FC", logo: "crest/crest-ujpest.png" },
      { name: "Zalaegerszegi TE FC", logo: "crest/crest-zte.png" }
    ];

    const teamList = document.getElementById("team-list");
    const positions = document.getElementById("positions");

    function createTeamElement(team) {
      const div = document.createElement("div");
      div.classList.add("team");
      div.setAttribute("draggable", "true");
      div.dataset.name = team.name;
      div.innerHTML = `<img src="${team.logo}" alt=""><span>${team.name}</span>`;
      return div;
    }

    function renderTeamList() {
      teamList.innerHTML = "";
      teams.forEach(team => {
        const el = createTeamElement(team);
        teamList.appendChild(el);
      });
    }

    function renderPositions() {
      for (let i = 1; i <= 12; i++) {
        const row = document.createElement("div");
        row.classList.add("position");
        row.innerHTML = `
          <div class="position-number">${i}.</div>
          <div class="dropzone" data-pos="${i}" id="pos-${i}"></div>
        `;
        positions.appendChild(row);
      }
    }

    function setupDragAndDrop() {
      document.addEventListener("dragstart", e => {
        if (e.target.classList.contains("team")) {
          e.dataTransfer.setData("text/plain", e.target.dataset.name);
          e.dataTransfer.setData("html", e.target.outerHTML);
          const parentZone = e.target.closest(".dropzone");
          e.dataTransfer.setData("source", parentZone ? parentZone.id : "team-list");
        }
      });

      document.querySelectorAll(".dropzone").forEach(zone => {
        zone.addEventListener("dragover", e => {
          e.preventDefault();
          zone.classList.add("over");
        });
        zone.addEventListener("dragleave", () => {
          zone.classList.remove("over");
        });
        zone.addEventListener("drop", e => {
          e.preventDefault();
          zone.classList.remove("over");

          const teamName = e.dataTransfer.getData("text/plain");
          const draggedEl = document.querySelector(`.team[data-name="${teamName}"]`);
          const sourceId = e.dataTransfer.getData("source");
          const sourceZone = document.getElementById(sourceId);
          const targetZone = zone;
          const targetEl = targetZone.firstElementChild;

          if (targetEl && targetEl !== draggedEl) {
            // Csere logika
            targetZone.innerHTML = "";
            if (sourceZone && sourceZone.classList.contains("dropzone")) {
              sourceZone.innerHTML = "";
              sourceZone.appendChild(targetEl);
            } else {
              teamList.appendChild(targetEl);
            }
          } else if (sourceZone && sourceZone.classList.contains("dropzone")) {
            sourceZone.innerHTML = "";
          } else if (sourceId === "team-list") {
            teamList.removeChild(draggedEl);
          }

          targetZone.innerHTML = "";
          targetZone.appendChild(draggedEl);
        });
      });
    }

    renderTeamList();
    renderPositions();
    setupDragAndDrop();
  </script>
</body>
</html>
