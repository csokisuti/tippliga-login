<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>UCL TippLiga ‚Äì Eredm√©nyek</title>

  <link rel="stylesheet" href="style-themed.css" />
  <link rel="stylesheet" href="style.css">
  <script src="loader.js" defer></script>

  <style>
    .layout{ display:flex; flex-direction:column; gap:16px; max-width:1200px; margin:0 auto; padding:20px; }

    /* Fejl√©c/nav ‚Äì egys√©ges */
    .header{ display:flex; align-items:center; justify-content:space-between; }
    .header-left{ display:flex; align-items:center; gap:12px; }
    .fav-crest{ width:46px; height:46px; object-fit:contain; border-radius:8px; border:1px solid var(--line,#e6eaf1); background:#fff; }
    .welcome{ color:var(--muted,#64748b); margin:4px 0 0; }

    .nav-grid{ display:grid; grid-template-columns: repeat(6, minmax(0,1fr)); gap:14px; }
    @media (max-width:1100px){ .nav-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); } }
    @media (max-width:700px){ .nav-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    .nav-card{ display:flex; gap:12px; align-items:center; text-decoration:none; color:inherit; padding:14px; background:#fff; border:1px solid var(--line,#e6eaf1); border-radius:14px; box-shadow:0 6px 18px rgba(15,23,42,.05); }
    .nav-card .icon-wrap{ width:42px; height:42px; border-radius:10px; display:flex; align-items:center; justify-content:center; background:color-mix(in oklab, var(--accent,#3b82f6) 15%, white); color:var(--accent,#3b82f6); }
    .nav-card .text{ display:flex; flex-direction:column; line-height:1.2; }
    .nav-card .title{ font-weight:800; }
    .nav-card .desc{ color:var(--muted,#64748b); font-size:12px; }
    .pill-badge{ display:inline-flex; align-items:center; justify-content:center; min-width:18px; height:18px; padding:0 6px; margin-left:6px; border-radius:999px; background:#ef4444; color:#fff; font-size:12px; font-weight:700; line-height:1; vertical-align:middle; }
    .pill-badge[hidden]{ display:none !important; }

    .btn-accent{ min-height:40px; padding:10px 14px; border-radius:10px; background:var(--accent,#3b82f6); color:#fff; border:1px solid var(--line,#e6eaf1); font-weight:600; cursor:pointer; display:inline-flex; align-items:center; gap:8px; box-shadow:0 6px 18px rgba(0,0,0,.08); }
    .btn-accent:hover{ filter:brightness(.95); }
    .btn-accent:focus{ outline:2px solid color-mix(in oklab, var(--accent,#3b82f6) 30%, white); outline-offset:2px; }
    .btn-icon{ width:18px; height:18px; display:inline-block; }

    /* Oldaltartalom */
    .card{ background:#fff; border:1px solid var(--line,#e6eaf1); border-radius:12px; box-shadow:0 6px 18px rgba(15,23,42,.06); overflow:hidden; }
    .card h3{ margin:0; padding:10px 12px; border-bottom:1px solid var(--line,#e6eaf1); background:#f7f9fd; }

    /* B√≥nusz k√°rty√°k + mod√°l */
    .bonus-wrap{ display:flex; align-items:center; gap:16px; padding:12px; }
    .bonus-muted{ color:#64748b; font-size:12px }
    .bonus-title{ font-size:20px; font-weight:800 }
    .bonus-bar{ height:8px; background:#eef2ff; border-radius:999px; overflow:hidden; width:280px; }
    .bonus-bar>div{ height:100%; background:#16a34a }

    /* üîß R√©szletek gomb: kicsi √©s jobb sz√©len */
    .bonus-wrap > .right{
      margin-left:auto;
      display:flex; align-items:center; gap:12px;
      flex-wrap:nowrap; min-width:0; flex:1 1 auto;
    }
    .bonus-wrap .right .btn-accent{
      flex:0 0 auto; width:auto !important;
      min-height:32px; padding:6px 10px; font-size:14px; border-radius:8px;
      margin-left:auto;
    }

    .overlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; padding:20px; z-index:1000 }
    .modal{ background:#fff; border-radius:16px; width:min(1000px,100%); overflow:hidden; display:flex; }
    .aside{ width:320px; background:#fafafa; border-right:1px solid var(--line,#e6eaf1); display:flex; flex-direction:column }
    .aside h4{ margin:12px; margin-bottom:8px }
    .aside .search{ padding:0 12px 12px }
    .aside input{ width:100%; padding:10px 12px; border:1px solid var(--line,#e6eaf1); border-radius:10px }

    .list{ overflow:auto; max-height:70vh; padding:0 8px 12px }
    .userrow{
      width:100%; display:flex; align-items:center; justify-content:space-between;
      appearance:none; color:#111; background:#fff;
      border:1px solid var(--line,#e6eaf1); border-radius:10px; padding:8px 10px; margin:0 8px 8px; cursor:pointer;
      text-align:left;
    }
    .userrow:hover{ background:#f1f5f9; }
    .userrow .name{ font-weight:600; }
    .badge{ background:#ecfdf5; color:#065f46; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:700 }

    .main{ flex:1; display:flex; flex-direction:column }
    .main .head{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid var(--line,#e6eaf1) }
    .main .body{ padding:12px 16px }
    table{ width:100%; border-collapse:separate; border-spacing:0 }
    thead{ background:#f6f7fb }
    th, td{ text-align:left; padding:9px 10px; border-bottom:1px solid var(--line,#e6eaf1) }

    /* Fordul√≥ eredm√©nyek */
    .controls{ padding:10px 12px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .select{ height:36px; padding:6px 10px; border-radius:10px; border:1px solid var(--line,#e6eaf1); background:#fff; }
    .summary{ padding:10px 12px; border-top:1px solid var(--line,#e6eaf1); border-bottom:1px solid var(--line,#e6eaf1); display:flex; flex-wrap:wrap; gap:8px; }
    .sum-chip{ background:#eef2ff; border:1px solid var(--line,#e6eaf1); border-radius:999px; padding:6px 10px; font-size:13px }
    .sum-chip b{ font-weight:800 }

    .match{ padding:12px 14px; border-bottom:1px solid var(--line,#e6eaf1); background:#fff; }
    .match:nth-child(even){ background:#fcfdff; }
    .team-row{ display:flex; flex-wrap:wrap; align-items:center; gap:8px; font-size:15px }
    .crest{ width:22px; height:22px; object-fit:contain }
    .meta{ color:#64748b; font-size:12px; margin-top:4px }
    .odds{ font-size:12px; background:#eef2ff; border-radius:999px; padding:3px 8px; }

    .tips{ margin-top:8px; display:flex; flex-direction:column; gap:6px }
    .tip{ padding:8px 10px; border-radius:8px; background:#eef; }
    .tip.correct{ background:#ecfdf5 }
    .tip.wrong{ background:#fdecec }
    .tip b{ font-weight:700 }
    .kicker{ color:#64748b; font-size:12px }
    .hidden-info{ color:#b45309; font-size:13px; margin-top:6px }
    .empty{ padding:12px 14px; color:#64748b }

    /* Chat ‚Äì UCL k√ºl√∂n szoba */
    .chat-fab{ position:fixed; right:22px; bottom:22px; z-index:999; width:52px; height:52px; border-radius:999px; border:0; background:var(--accent,#3b82f6); color:#fff; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 8px 26px rgba(0,0,0,.15); }
    .chat-fab .fab-badge{ position:absolute; top:-4px; right:-4px; min-width:20px; height:20px; padding:0 6px; border-radius:999px; background:#ef4444; color:#fff; font-size:12px; font-weight:800; line-height:20px; display:none; }
    .chat-fab.has-unread .fab-badge{ display:inline-block; }
    .chat-panel{ position:fixed; right:22px; bottom:86px; z-index:998; width:380px; max-width:calc(100vw - 32px); max-height:70vh; display:none; flex-direction:column; background:#fff; border:1px solid var(--line,#e6eaf1); border-radius:14px; box-shadow:0 10px 32px rgba(0,0,0,.14); }
    .chat-panel.open{ display:flex; }
    .chat-head{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--line,#e6eaf1); background:#f7f9fd; }
    .chat-title{ font-weight:800; }
    #chatClose{ width:28px; height:28px; border-radius:8px; font-size:18px; line-height:28px; display:inline-flex; align-items:center; justify-content:center; background:#eef2ff; color:#111; border:1px solid var(--line,#e6eaf1); cursor:pointer; }
    #chatClose:hover{ filter:brightness(0.95); }
    .chat-list{ overflow:auto; padding:8px 10px; }
    .chat-empty{ color:#64748b; font-size:13px; padding:8px 10px; }
    .msg{ padding:8px 10px; border-bottom:1px solid var(--line,#e6eaf1); display:flex; gap:8px; align-items:flex-start; }
    .msg .meta{ font-size:12px; color:#64748b; margin-bottom:2px; }
    .msg .text{ white-space:pre-wrap; word-break:break-word; }
    .msg .del{ margin-left:auto; background:#fee2e2; color:#991b1b; border:1px solid #fecaca; padding:2px 8px; border-radius:8px; font-size:12px; cursor:pointer; display:none; }
    .msg:hover .del{ display:inline-block; }

    #chatComposer{ display:flex; gap:8px; align-items:center; padding:10px; border-top:1px solid var(--line,#e6eaf1); background:#fff; }
    #chatInput{ background:#fff; color:#111; border:1px solid var(--line,#e6eaf1); height:40px; padding:8px 10px; border-radius:10px; font-size:14px; outline:none; width:100%; box-sizing:border-box; }
    #chatInput::placeholder{ color:#6b7280; }
    #chatSendBtn{ min-width:90px; padding:8px 12px; border-radius:10px; background:var(--accent,#3b82f6); color:#fff; border:0; font-weight:600; cursor:pointer; }

    /* === Ligav√°lt√≥ (NB I ‚Üî BL) ‚Äì csak ez az √∫j r√©sz === */
    .league-switch{ display:inline-flex; gap:8px; align-items:center; }
    .league-switch .ls-tab{
      display:inline-flex; align-items:center; gap:6px;
      padding:8px 10px; border:1px solid var(--line,#e6eaf1);
      border-radius:10px; background:#fff; text-decoration:none;
      color:#111; font-weight:700; line-height:1;
    }
    .league-switch .ls-tab.is-active{
      background:var(--accent,#3b82f6); color:#fff;
      border-color: color-mix(in oklab, var(--accent,#3b82f6) 55%, white);
    }
    .league-switch .ls-tab:hover{ filter:brightness(.97); }
  </style>

  <script type="module">
    /* (az √∂sszes eredeti JS v√°ltozatlanul maradt) */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import {
      getFirestore,
      doc, getDoc, setDoc, collection, getDocs, addDoc, deleteDoc,
      query, where, orderBy, onSnapshot, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyC2xpMW1xgaWIdI2JoEhK23vkC0FTF2PKc",
      authDomain: "tippliga-4b3af.firebaseapp.com",
      projectId: "tippliga-4b3af",
      storageBucket: "tippliga-4b3af.appspot.com",
      messagingSenderId: "720359845241",
      appId: "1:720359845241:web:d3d6edcac6b43ebff053a8"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    /* ... a teljes eredeti script v√°ltozatlan ... */
    /* ----- (ide nem ny√∫ltam) ----- */
  </script>
</head>
<body>
  <div class="layout">
    <div class="header">
      <div class="header-left">
        <img id="favCrest" class="fav-crest" alt="" hidden>
        <div>
          <h1>BL TippLiga</h1>
          <p id="welcome" class="welcome"></p>
        </div>
      </div>
      <!-- JOBB OLDAL: ligav√°lt√≥ + kil√©p√©s (√öJ) -->
      <div style="display:flex; align-items:center; gap:10px;">
        <div class="league-switch" role="tablist" aria-label="Liga v√°lt√≥">
          <a class="ls-tab" role="tab" href="results.html" aria-selected="false">NB I</a>
          <a class="ls-tab is-active" role="tab" href="results_ucl.html" aria-selected="true">BL</a>
        </div>

        <div>
          <button id="logout" class="btn-accent" aria-label="Kil√©p√©s">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M16 13v-2H7V7l-5 5 5 5v-4h9zm3-10H11a2 2 0 0 0-2 2v3h2V5h8v14h-8v-3H9v3a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2z"/>
            </svg>
            Kil√©p√©s
          </button>
        </div>
      </div>
    </div>

    <!-- NAV -->
    <nav class="nav-grid">
      <a class="nav-card" href="dashboard_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3 2 12h3v8h6v-5h2v5h6v-8h3L12 3z"/></svg>
        </div>
        <div class="text"><span class="title">F≈ëoldal</span><span class="desc">Tabella, h√≠rek, kedvencek</span></div>
      </a>
      <a class="nav-card" href="positions_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M9 4h6v16H9zM3 10h4v10H3zm14 6h4v4h-4z"/></svg>
        </div>
        <div class="text"><span class="title">Top 8 + b√≥nusz <span id="tipsBadge" class="pill-badge" hidden></span></span><span class="desc">Ligaf√°zis Top 8, gy≈ëztes, g√≥lkir√°ly</span></div>
      </a>
      <a class="nav-card" href="matches_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Z"/></svg>
        </div>
        <div class="text"><span class="title">Meccstippek</span><span class="desc">K√∂zelg≈ë meccsek & tippek</span></div>
      </a>
      <a class="nav-card" href="results_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M9 2h6a2 2 0 0 1 2 2h2v16a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4h2a2 2 0 0 1 2-2Z"/></svg>
        </div>
        <div class="text"><span class="title">Eredm√©nyek</span><span class="desc">Fordul√≥nk√©nti bont√°s</span></div>
      </a>
      <a class="nav-card" href="leaderboard_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M17 3h3a2 2 0 0 1 2 2v1a5 5 0 0 1-5 5h-1a6 6 0 0 1-4 3.9V17h3v2H9v-2h3v-2.1A6 6 0 0 1 8 11H7A5 5 0 0 1 2 6V5a2 2 0 0 1 2-2h3a2 2 0 0 1 2-2Z"/></svg>
        </div>
        <div class="text"><span class="title">√ñsszpontsz√°m</span><span class="desc">Toplista & b√≥nusz</span></div>
      </a>
      <a class="nav-card" href="profile_ucl.html">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5C21 16.5 17 14 12 14Z"/></svg>
        </div>
        <div class="text"><span class="title">Profil</span><span class="desc">Be√°ll√≠t√°sok & kedvenc csapat</span></div>
      </a>
      <a class="nav-card" id="adminLink" href="admin_ucl.html" style="display:none;">
        <div class="icon-wrap" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 8a4 4 0 1 1-4 4 4 4 0 0 1 4-4Z"/></svg>
        </div>
        <div class="text"><span class="title">Admin</span><span class="desc">Szezon-z√°r & be√°ll√≠t√°sok</span></div>
      </a>
    </nav>

    <!-- (a tov√°bbi tartalom v√°ltozatlan) -->
    <!-- B√≥nuszok √∂sszegz√©s -->
    <section class="card">
      <h3>B√≥nuszok ‚Äì √∂sszegz√©s</h3>
      <!-- ... -->
    </section>

    <!-- Fordul√≥ eredm√©nyek -->
    <section class="card">
      <h3>Fordul√≥ eredm√©nyek</h3>
      <div class="controls">
        <select id="roundSelect" class="select" aria-label="Fordul√≥ v√°laszt√°sa"></select>
      </div>
      <div id="resultsContainer"></div>
    </section>
  </div>

  <!-- Mod√°lok √©s chat ‚Äì v√°ltozatlan -->
  <!-- ... az eredeti HTML v√©ge ... -->
  <button id="chatToggle" class="chat-fab" title="K√∂z√∂ss√©gi chat">
    <svg width="26" height="26" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4 4h16a2 2 0 0 1 2 2v11a2 2 0 0 1 2 2H8l-4 3V6a2 2 0 0 1 2-2Z"/></svg>
    <span id="chatFabBadge" class="fab-badge"></span>
  </button>

  <section id="chatPanel" class="chat-panel" aria-label="K√∂z√∂ss√©gi chat">
    <div class="chat-head">
      <div class="chat-title">K√∂z√∂ss√©gi chat</div>
      <button id="chatClose" aria-label="Bez√°r√°s">‚úï</button>
    </div>
    <div id="chatMessages" class="chat-list" role="log" aria-live="polite"></div>
    <div id="chatComposer">
      <input id="chatInput" type="text" placeholder="√çrj valamit‚Ä¶" autocomplete="off">
      <button id="chatSendBtn">K√ºld√©s</button>
    </div>
  </section>
</body>
</html>
